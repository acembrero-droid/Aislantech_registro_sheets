


<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AISLANTECH - Acceso</title>
    <style>
        :root { --amarillo: #eebc06; --fondo: #f4f4f4; --blanco: #ffffff; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--fondo); display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .card { background: var(--blanco); padding: 40px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); width: 380px; }
        h1 { color: var(--amarillo); text-align: center; margin-bottom: 20px; }
        
        /* Pestañas */
        .tabs { display: flex; margin-bottom: 20px; border-bottom: 2px solid #eee; }
        .tab { flex: 1; padding: 12px; text-align: center; cursor: pointer; font-weight: bold; color: #aaa; transition: 0.3s; }
        .tab.active { color: var(--amarillo); border-bottom: 2px solid var(--amarillo); }

        input { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; outline: none; }
        button { width: 100%; padding: 14px; background: var(--amarillo); border: none; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 15px; }
        button:disabled { background: #ccc; cursor: not-allowed; }
        
        /* Requisitos visuales */
        .req-container { margin: 10px 0; display: none; } /* Oculto por defecto */
        .req { font-size: 12px; color: #999; display: flex; align-items: center; margin: 3px 0; }
        .req.valid { color: #28a745; font-weight: bold; }
        .req::before { content: "○"; margin-right: 8px; }
        .req.valid::before { content: "●"; }
        
        .loader { display: none; text-align: center; color: var(--amarillo); margin-top: 10px; }
    </style>
</head>
<body>

<div class="card">
    <h1>AISLANTECH</h1>
    
    <div class="tabs">
        <div id="tab-login" class="tab active" onclick="cambiarModo('login')">Entrar</div>
        <div id="tab-signup" class="tab" onclick="cambiarModo('signup')">Registrarse</div>
    </div>

    <div id="form-body">
        <input type="text" id="username" placeholder="Nombre completo" style="display:none">
        <input type="email" id="email" placeholder="Email corporativo">
        <input type="password" id="password" placeholder="Contraseña" oninput="validar()">
        
        <div id="req-box" class="req-container">
            <div id="r-len" class="req">8+ caracteres</div>
            <div id="r-num" class="req">Un número</div>
            <div id="r-cap" class="req">Una mayúscula</div>
        </div>

        <button id="btn-main" onclick="enviar()">Entrar</button>
        <div id="loading" class="loader">Conectando con el servidor...</div>
    </div>
</div>

<script>
    // --- COLOCA TU URL AQUÍ ---
    const API_URL = "https://script.google.com/macros/s/AKfycbxGK9fXOhcxQAaMVHGLMFsEQNLbyyHEVZWVcDbLvET3BUeDE9DhQiZ4NTtBREdt0-ho/exec"; 

    let modoActual = 'login';

    function cambiarModo(nuevoModo) {
        modoActual = nuevoModo;
        
        // Actualizar UI de pestañas
        document.getElementById('tab-login').classList.toggle('active', modoActual === 'login');
        document.getElementById('tab-signup').classList.toggle('active', modoActual === 'signup');

        // Mostrar/Ocultar campos según el modo
        const displaySignup = modoActual === 'signup' ? 'block' : 'none';
        document.getElementById('username').style.display = displaySignup;
        document.getElementById('req-box').style.display = displaySignup;
        
        // Cambiar texto del botón
        document.getElementById('btn-main').innerText = modoActual === 'login' ? 'Entrar' : 'Crear Cuenta';
        
        validar(); // Ejecutar validación inicial
    }

    function validar() {
        if (modoActual === 'login') {
            document.getElementById('btn-main').disabled = false;
            return;
        }

        const p = document.getElementById('password').value;
        const c1 = p.length >= 8;
        const c2 = /[0-9]/.test(p);
        const c3 = /[A-Z]/.test(p);

        document.getElementById('r-len').className = c1 ? 'req valid' : 'req';
        document.getElementById('r-num').className = c2 ? 'req valid' : 'req';
        document.getElementById('r-cap').className = c3 ? 'req valid' : 'req';

        document.getElementById('btn-main').disabled = !(c1 && c2 && c3);
    }

    async function enviar() {
        const email = document.getElementById('email').value;
        const pass = document.getElementById('password').value;
        const user = document.getElementById('username').value;

        if (!email || !pass || (modoActual === 'signup' && !user)) {
            alert("Completa todos los campos");
            return;
        }

        document.getElementById('btn-main').style.display = 'none';
        document.getElementById('loading').style.display = 'block';

        try {
            await fetch(API_URL, {
                method: 'POST',
                mode: 'no-cors',
                body: JSON.stringify({
                    action: modoActual,
                    email: email,
                    password: pass,
                    username: user
                })
            });

            document.getElementById('loading').style.display = 'none';
            document.getElementById('btn-main').style.display = 'block';

            if (modoActual === 'signup') {
                alert("✓ Solicitud enviada. Revisa tu email para activar la cuenta.");
            } else {
                alert("✓ Intento de acceso registrado.");
            }
        } catch (e) {
            alert("Error de conexión");
            document.getElementById('loading').style.display = 'none';
            document.getElementById('btn-main').style.display = 'block';
        }
    }
</script>

</body>
</html>
